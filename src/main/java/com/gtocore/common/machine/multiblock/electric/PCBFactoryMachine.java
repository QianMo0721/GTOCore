package com.gtocore.common.machine.multiblock.electric;

import com.gtocore.api.data.tag.GTOTagPrefix;
import com.gtocore.api.pattern.GTOPredicates;
import com.gtocore.common.data.GTOBlocks;
import com.gtocore.common.data.GTOMaterials;

import com.gtolib.api.annotation.Scanned;
import com.gtolib.api.annotation.language.RegisterLanguage;
import com.gtolib.api.machine.feature.multiblock.IMultiStructureMachine;
import com.gtolib.api.machine.multiblock.StorageMultiblockMachine;
import com.gtolib.api.recipe.Recipe;
import com.gtolib.api.recipe.modifier.RecipeModifierFunction;

import com.gregtechceu.gtceu.api.blockentity.MetaMachineBlockEntity;
import com.gregtechceu.gtceu.api.data.chemical.ChemicalHelper;
import com.gregtechceu.gtceu.api.data.chemical.material.Material;
import com.gregtechceu.gtceu.api.data.chemical.material.stack.MaterialStack;
import com.gregtechceu.gtceu.api.data.tag.TagPrefix;
import com.gregtechceu.gtceu.api.machine.MultiblockMachineDefinition;
import com.gregtechceu.gtceu.api.pattern.BlockPattern;
import com.gregtechceu.gtceu.api.pattern.FactoryBlockPattern;
import com.gregtechceu.gtceu.common.data.GTBlocks;
import com.gregtechceu.gtceu.common.data.GTMaterials;

import net.minecraft.MethodsReturnNonnullByDefault;
import net.minecraft.network.chat.Component;

import com.lowdragmc.lowdraglib.syncdata.annotation.Persisted;
import com.lowdragmc.lowdraglib.syncdata.field.ManagedFieldHolder;
import it.unimi.dsi.fastutil.ints.Int2ObjectOpenHashMap;
import org.jetbrains.annotations.NotNull;
import org.jetbrains.annotations.Nullable;

import java.util.List;

import javax.annotation.ParametersAreNonnullByDefault;

import static com.gregtechceu.gtceu.api.machine.multiblock.PartAbility.MAINTENANCE;
import static com.gregtechceu.gtceu.api.machine.multiblock.PartAbility.PARALLEL_HATCH;
import static com.gregtechceu.gtceu.api.pattern.Predicates.*;

@Scanned
@ParametersAreNonnullByDefault
@MethodsReturnNonnullByDefault
public final class PCBFactoryMachine extends StorageMultiblockMachine implements IMultiStructureMachine {

    @RegisterLanguage(en = "PCB Factory Tier: ", cn = "PCB工厂等级：")
    public static final String TIER = "gtocore.pcb_factory.tier";

    private static final Int2ObjectOpenHashMap<BlockPattern> PATTERNS = new Int2ObjectOpenHashMap<>(3, 0.9F);

    private static final ManagedFieldHolder MANAGED_FIELD_HOLDER = new ManagedFieldHolder(
            PCBFactoryMachine.class, StorageMultiblockMachine.MANAGED_FIELD_HOLDER);

    @Persisted
    private int machineTier = 1;

    public PCBFactoryMachine(MetaMachineBlockEntity holder) {
        super(holder, 1, i -> ChemicalHelper.getPrefix(i.getItem()) == GTOTagPrefix.NANITES);
    }

    @Override
    public ManagedFieldHolder getFieldHolder() {
        return MANAGED_FIELD_HOLDER;
    }

    @Override
    public void onMachineChanged() {
        machineTier = 0;
        MaterialStack stack = ChemicalHelper.getMaterialStack(getStorageStack());
        if (stack.isEmpty()) return;
        Material material = stack.material();
        if (material == GTMaterials.Gold) {
            machineTier = 1;
        } else if (material == GTOMaterials.Orichalcum) {
            machineTier = 2;
        } else if (material == GTOMaterials.Enderium) {
            machineTier = 3;
        }
        updateCheck();
    }

    public static BlockPattern getBlockPattern(int tier, MultiblockMachineDefinition definition) {
        return PATTERNS.computeIfAbsent(tier, t -> {
            FactoryBlockPattern builder = FactoryBlockPattern.start(definition).where(' ', any());
            return switch (t) {
                case 2 -> builder.aisle("       AAAAA       ", "        AAA        ", "         A         ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("       ABCBA       ", "       AADAA       ", "        AAA        ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("     AADBCBDAA     ", "       ADDDA       ", "        AAA        ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("    A  BBCBB  A    ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("   A BBBBCBBBB A   ", "        ACA        ", "       AACAA       ", "       AACAA       ", "        A A        ", "        A A        ", "        A A        ", "        A A        ", "        A A        ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("  A BBBBBBBBBBB A  ", "       HIJIH       ", "      AIIJIIA      ", "      AAACAAA      ", "       AACAA       ", "        ACA        ", "       DACAD       ", "        ACA        ", "        ACA        ", "        A A        ", "       DA AD       ", "        A A        ", "        A A        ", "        A A        ", "       DA AD       ", "        A A        ", "        A A        ", "        A A        ", "        A A        ", "        A A        ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("  A BBBBBBBBBBB A  ", "      HKKKKKH      ", "     AIKKKKKIA     ", "     AIIIJIIIA     ", "      IIIJIII      ", "      IIIJIII      ", "      DIIJIID      ", "       IIJII       ", "       IICII       ", "       IICII       ", "      DIICIID      ", "       IICII       ", "       IICII       ", "       IICII       ", "      DIICIID      ", "       IICII       ", "       IICII       ", "       IICII       ", "       DACAD       ", "        ACA        ", "        A A        ", "        A A        ", "        A A        ", "        A A        ", "        A A        ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("AADBBBBBBBBBBBBBDAA", " AA  HKDNNNDKH  AA ", "    AIKD   DKIA    ", "    AAIDNNNDIAA    ", "     AID   DIA     ", "      IDNNNDI      ", "     DID   DID     ", "      IDNNNDI      ", "      ID   DI      ", "      IDNNNDI      ", "     DID   DID     ", "      IDNNNDI      ", "      ID   DI      ", "      IDNNNDI      ", "     DID   DID     ", "      IDNNNDI      ", "      ID   DI      ", "      IDNNNDI      ", "      DII IID      ", "       IICII       ", "       IICII       ", "        ICI        ", "        ICI        ", "        ICI        ", "       AACAA       ", "         C         ", "         C         ", "         C         ", "         C         ", "         C         ")
                        .aisle("ABBBBBBBBBBBBBBBBBA", "AAD AIKN   NKIA DAA", " AA AIK     KIA AA ", "    AAIN   NIAA    ", "    AAI     IAA    ", "    AAIN   NIAA    ", "    AAI     IAA    ", "    AAIN   NIAA    ", "    AAI     IAA    ", "     AIN   NIA     ", "     AI     IA     ", "     AIN   NIA     ", "     AI     IA     ", "     AIN   NIA     ", "     AI     IA     ", "     AIN   NIA     ", "     AI     IA     ", "     AIN   NIA     ", "     AAI   IAA     ", "     AAI   IAA     ", "      AI   IA      ", "      AI   IA      ", "      AI   IA      ", "      AI   IA      ", "      AA   AA      ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("ACCCCBBBBBBBBBCCCCA", "ADD CJKN R NKJC DDA", "AAA CJK  R  KJC AAA", "    CCJN R NJCC    ", "     CJ  R  JC     ", "     CJN R NJC     ", "     CJ  R  JC     ", "     CJN R NJC     ", "     CC  R  CC     ", "      CN R NC      ", "      C  R  C      ", "      CN R NC      ", "      C  R  C      ", "      CN R NC      ", "      C  R  C      ", "      CN R NC      ", "      C  R  C      ", "      CN R NC      ", "      C  R  C      ", "      CC R CC      ", "       C   C       ", "       C   C       ", "       C   C       ", "       C   C       ", "       C   C       ", "       C   C       ", "       C   C       ", "       C   C       ", "       C   C       ", "       C   C       ")
                        .aisle("ABBBBBBBBBBBBBBBBBA", "AAD AIKN   NKIA DAA", " AA AIK     KIA AA ", "    AAIN   NIAA    ", "    AAI     IAA    ", "    AAIN   NIAA    ", "    AAI     IAA    ", "    AAIN   NIAA    ", "    AAI     IAA    ", "     AIN   NIA     ", "     AI     IA     ", "     AIN   NIA     ", "     AI     IA     ", "     AIN   NIA     ", "     AI     IA     ", "     AIN   NIA     ", "     AI     IA     ", "     AIN   NIA     ", "     AAI   IAA     ", "     AAI   IAA     ", "      AI   IA      ", "      AI   IA      ", "      AI   IA      ", "      AI   IA      ", "      AA   AA      ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("AADBBBBBBBBBBBBBDAA", " AA  HKDNNNDKH  AA ", "    AIKD   DKIA    ", "    AAIDNNNDIAA    ", "     AID   DIA     ", "      IDNNNDI      ", "     DID   DID     ", "      IDNNNDI      ", "      ID   DI      ", "      IDNNNDI      ", "     DID   DID     ", "      IDNNNDI      ", "      ID   DI      ", "      IDNNNDI      ", "     DID   DID     ", "      IDNNNDI      ", "      ID   DI      ", "      IDNNNDI      ", "      DII IID      ", "       IICII       ", "       IICII       ", "        ICI        ", "        ICI        ", "        ICI        ", "       AACAA       ", "         C         ", "         C         ", "         C         ", "         C         ", "         C         ")
                        .aisle("  A BBBBBBBBBBB A  ", "      HKKKKKH      ", "     AIKKKKKIA     ", "     AIIIJIIIA     ", "      IIIJIII      ", "      IIIJIII      ", "      DIIJIID      ", "       IIJII       ", "       IICII       ", "       IICII       ", "      DIICIID      ", "       IICII       ", "       IICII       ", "       IICII       ", "      DIICIID      ", "       IICII       ", "       IICII       ", "       IICII       ", "       DACAD       ", "        ACA        ", "        A A        ", "        A A        ", "        A A        ", "        A A        ", "        A A        ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("  A BBBBBBBBBBB A  ", "       HIJIH       ", "      AIIJIIA      ", "      AAACAAA      ", "       AACAA       ", "        ACA        ", "       DACAD       ", "        ACA        ", "        ACA        ", "        A A        ", "       DA AD       ", "        A A        ", "        A A        ", "        A A        ", "       DA AD       ", "        A A        ", "        A A        ", "        A A        ", "        A A        ", "        A A        ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("   A BBBBCBBBB A   ", "        ACA        ", "       AACAA       ", "       AACAA       ", "        A A        ", "        A A        ", "        A A        ", "        A A        ", "        A A        ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("    A  BBCBB  A    ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("     AADBCBDAA     ", "       ADDDA       ", "        AAA        ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("       ABCBA       ", "       AADAA       ", "        AAA        ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("       AAAAA       ", "        AAA        ", "         A         ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("       EEEEE       ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "       FFFFF       ", "         F         ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("      EEEEEEE      ", "       GGEGG       ", "       GGEGG       ", "       GGEGG       ", "       GGEGG       ", "       GGEGG       ", "       GGEGG       ", "       GGEGG       ", "       GGEGG       ", "       GGEGG       ", "       GGEGG       ", "       GGEGG       ", "       GGEGG       ", "       GGEGG       ", "      FEEEEEF      ", "         F         ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("     EEEEEEEEE     ", "      G     G      ", "      G     G      ", "      G     G      ", "      G     G      ", "      G     G      ", "      G F F G      ", "      G  F  G      ", "      G F F G      ", "      G     G      ", "      G     G      ", "      G     G      ", "      G     G      ", "      G     G      ", "     FEEEEEEEF     ", "         F         ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("    EEEEEEEEEEE    ", "     G  LLL  G     ", "     G  LLL  G     ", "     G  LLL  G     ", "     G  LLL  G     ", "     G FLLLF G     ", "     G  LLL  G     ", "     G  LLL  G     ", "     G  LLL  G     ", "     G FLLLF G     ", "     G  LLL  G     ", "     G  LLL  G     ", "     G  LLL  G     ", "     G  LLL  G     ", "    FEEEEEEEEEF    ", "        LLL        ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("   EEEEEEEEEEEEE   ", "    G  L   L  G    ", "    G  L   L  G    ", "    G  L   L  G    ", "    G FL   LF G    ", "    G  L   L  G    ", "    G  L   L  G    ", "    G  L   L  G    ", "    G  L   L  G    ", "    G  L   L  G    ", "    G FL   LF G    ", "    G  L   L  G    ", "    G  L   L  G    ", "    G  L   L  G    ", "   FEEEEEEEEEEEF   ", "       LLLLL       ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("   EEEEEEEEEEEEE   ", "    G LO S OL G    ", "    G LP S PL G    ", "    GFLO S OLFG    ", "    G LP S PL G    ", "    G LO S OL G    ", "    G LP S PL G    ", "    G LO S OL G    ", "    G LP S PL G    ", "    G LO S OL G    ", "    G LP S PL G    ", "    GFLO S OLFG    ", "    G LP S PL G    ", "    G LO S OL G    ", "   FEEEEEEEEEEEF   ", "   FFFFLLLLLFFFF   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("   EEEEEEEEEEEEE   ", "    G  L   L  G    ", "    G FL   LF G    ", "    G  L S L  G    ", "    G  L   L  G    ", "    G  L   L  G    ", "    G  L   L  G    ", "    G  L S L  G    ", "    G  L   L  G    ", "    G  L   L  G    ", "    G  L   L  G    ", "    G  L S L  G    ", "    G FL   LF G    ", "    G  L   L  G    ", "   FEEEEEEEEEEEF   ", "       LLLLL       ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("   EEEEEEEEEEEEE   ", "    FEELQQQLEEF    ", "    FEELLLLLEEF    ", "    FEELLSLLEEF    ", "    FEELLLLLEEF    ", "    FEELQQQLEEF    ", "    FEELLLLLEEF    ", "    FEELLSLLEEF    ", "    FEELLLLLEEF    ", "    FEELQQQLEEF    ", "    FEELLLLLEEF    ", "    FEELLSLLEEF    ", "    FEELLLLLEEF    ", "    FEELQQQLEEF    ", "    FEEEEEEEEEF    ", "        LLL        ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("    EEEEEEEEEEE    ", "     FMHEPEHMF     ", "     FMHEPEHMF     ", "     FMHESEHMF     ", "     FMHEPEHMF     ", "     FMHEPEHMF     ", "     F HEPEH F     ", "     F HESEH F     ", "     F HEPEH F     ", "     F HEPEH F     ", "     F HEPEH F     ", "     F HESEH F     ", "     F HEPEH F     ", "     F HEPEH F     ", "     FEEEEEEEF     ", "         F         ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("     EEEEEEEEE     ", "      MPEEEPM      ", "      MPEEEPM      ", "      MPESEPM      ", "      MPEEEPM      ", "      MMEEEMM      ", "        EEE        ", "        ELE        ", "        EEE        ", "        EEE        ", "        EEE        ", "        ELE        ", "        EEE        ", "        EEE        ", "      FEEEEEF      ", "         F         ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("     EEEEEEEEE     ", "      MMMSMMM      ", "      MMMSMMM      ", "      MMMSMMM      ", "      MMMMMMM      ", "      MMMMMMM      ", "                   ", "         L         ", "                   ", "                   ", "                   ", "         L         ", "                   ", "                   ", "       FFFFF       ", "         F         ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("      EEEEEEE      ", "       HMSMH       ", "       HMSMH       ", "       HMSMH       ", "        MLM        ", "         L         ", "         L         ", "         L         ", "         L         ", "         L         ", "         L         ", "         L         ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("       EEEEE       ", "        MMM        ", "        MMM        ", "        MTM        ", "        MMM        ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .aisle("        EEE        ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ", "                   ")
                        .where('A', blocks(GTOBlocks.NAQUADAH_ALLOY_CASING.get()))
                        .where('B', blocks(GTOBlocks.IRIDIUM_CASING.get()))
                        .where('C', blocks(GTBlocks.HIGH_POWER_CASING.get()))
                        .where('D', blocks(ChemicalHelper.getBlock(TagPrefix.frameGt, GTMaterials.Neutronium)))
                        .where('E', blocks(GTOBlocks.BORON_CARBIDE_CERAMIC_RADIATION_RESISTANT_MECHANICAL_CUBE.get()))
                        .where('F', blocks(ChemicalHelper.getBlock(TagPrefix.frameGt, GTMaterials.MaragingSteel300)))
                        .where('G', blocks(GTBlocks.CASING_TEMPERED_GLASS.get()))
                        .where('H', blocks(GTOBlocks.STRONTIUM_CARBONATE_CERAMIC_RAY_ABSORBING_MECHANICAL_CUBE.get()))
                        .where('I', blocks(GTOBlocks.GRAVITY_STABILIZATION_CASING.get()))
                        .where('J', blocks(GTOBlocks.RADIATION_ABSORBENT_CASING.get()))
                        .where('K', blocks(GTOBlocks.ADVANCED_ASSEMBLY_LINE_UNIT.get()))
                        .where('L', blocks(GTOBlocks.PRESSURE_CONTAINMENT_CASING.get()))
                        .where('M', blocks(GTOBlocks.IRIDIUM_CASING.get())
                                .or(GTOPredicates.autoLaserAbilities(definition.getRecipeTypes()))
                                .or(abilities(PARALLEL_HATCH).setMaxGlobalLimited(1))
                                .or(abilities(MAINTENANCE).setExactLimit(1)))
                        .where('N', blocks(GTBlocks.SUPERCONDUCTING_COIL.get()))
                        .where('O', blocks(GTOBlocks.MAGTECH_CASING.get()))
                        .where('P', blocks(ChemicalHelper.getBlock(TagPrefix.frameGt, GTMaterials.Europium)))
                        .where('Q', blocks(GTOBlocks.PPS_CORROSION_RESISTANT_MECHANICAL_HOUSING.get()))
                        .where('R', blocks(GTOBlocks.HOLLOW_CASING.get()))
                        .where('S', blocks(GTBlocks.HERMETIC_CASING_ZPM.get()))
                        .where('T', controller(blocks(definition.get())))
                        .where(' ', any())
                        .build();
                case 3 -> builder.aisle("               AAAAAAAAAAAAAAAAA               ", "                   A   A   A                   ", "                   A   A   A                   ", "               CCCCCCCCCCCCCCCCC               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("              AAOOOOOOOOOOOOOOOAA              ", "                DAAAAAAAAAAAAAD                ", "                DEEEEEEEEEEEEED                ", "               CDAAAAAAAAAAAAADC               ", "                   H   H   H                   ", "                   H   H   H                   ", "                   H   H   H                   ", "                   H   H   H                   ", "                   H   H   H                   ", "                   H   H   H                   ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("              AOOOOOOOOOOOOOOOOOA              ", "               CDPHHPHHPHHPHHPDC               ", "               CDJJJJJJJJJJJJJDC               ", "               CDPHHPHHPHHPHHPDC               ", "               CGGGGGGGGGGGGGGGC               ", "               CGGGGGGGGGGGGGGGC               ", "               CPPPPPPPPPPPPPPPC               ", "               CGGGGGGGGGGGGGGGC               ", "               CGGGGGGGGGGGGGGGC               ", "               C   H   H   H   C               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("              AOOOOOOOOOOOOOOOOOA              ", "               CKPPPPPPPPPPPPPKC               ", "               CKNNNNNNNNNNNNNKC               ", "               CKPPPPPPPPPPPPPKC               ", "               CIIIIIIIIIIIIIIIC               ", "               CA             AC               ", "      K        A               A        K      ", "      K        A               A        K      ", "      K        A               A        K      ", "      K        CAAAAAAAAAAAAAAAC        K      ", "      K        CCCCCCCCCCCCCCCCC        K      ", "      K                                 K      ", "      K                                 K      ", "      K                                 K      ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("              AOOOOOOOOOOOOOOOOOA              ", "               CKLRRRRRRRRRRRLKC               ", "               CKNGGGGGGGGGGGNKC               ", "               CKLBBBBBBBBBBBLKC               ", "               CA             AC               ", "      K        AA             AA        K      ", "     CMCCCCCCCCA               ACCCCCCCCMC     ", "     CMCEEEEEEEA               AEEEEEEECMC     ", "     CMCCCCCCCCA               ACCCCCCCCMC     ", "     CMC       AAAAPPPPPAAPPPPAA       CMC     ", "     CMC       CEEEEEEEEEEEEEEEC       CMC     ", "     CMC                               CMC     ", "     CMC                               CMC     ", "     CMC                               CMC     ", "      K                                 K      ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("              AOOOOOOOOOOOOOOOOOA              ", "              HCKN           NKCH              ", "              HCKNGGGGGGGGGGGNKCH              ", "              HCKNJJJJJJJJJJJNKCH              ", "      L       HCAN  J  J  J  NACH       L      ", "     KMK      HAAN  J  J  J  NAAH      KMK     ", "    KMMMAAAAAAAA N  J  J  J  N AAAAAAAAMMMK    ", "    KMJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJJMK    ", "    KMJMAAAAAAAA               AAAAAAAAMJMK    ", "    KMJMK      APPPPAAAPPPPAAPPA      KMJMK    ", "    KMJMK      CEEEEEEEEEEEEEEEC      KMJMK    ", "    KMJMK                             KMJMK    ", "    KMJMK                             KMJMK    ", "    KMMMK                             KMMMK    ", "     KMK                               KMK     ", "      L                                 L      ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("              AOOOOOOOOOOOOOOOOOA              ", "               CKLRRRRRRRRRRRLKC               ", "               CKNGGGGGGGGGGGNKC               ", "               CKLBBBBBBBBBBBLKC               ", "               CA             AC               ", "      K        AA             AA        K      ", "     CMCCCCCCCCA               ACCCCCCCCMC     ", "     CMCEEEEEEEA               AEEEEEEECMC     ", "     CMCCCCCCCCA               ACCCCCCCCMC     ", "     CMC       AAAAPPPPPAAPPPPAA       CMC     ", "     CMC       CEEEEEEEEEEEEEEEC       CMC     ", "     CMC                               CMC     ", "     AJA                               AJA     ", "     CMC                               CMC     ", "      K                                 K      ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("              AOOOOOOOOOOOOOOOOOA              ", "               CKPPPPPPPPPPPPPKC               ", "               CKNNNNNNNNNNNNNKC               ", "               CKPPPPPPPPPPPPPKC               ", "               CIIIIIIIIIIIIIIIC               ", "               CA             AC               ", "      K        A               A        K      ", "      K        A               A        K      ", "      K        A               A        K      ", "      K        CAAAAAAAAAAAAAAAC        K      ", "      K        CCCCCCCCCCCCCCCCC        K      ", "     CKC                               CKC     ", "     AJA                               AJA     ", "     CEC                               CEC     ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("              AOOOOOOOOOOOOOOOOOA              ", "               CDPHHPHHPHHPHHPDC               ", "               CDJJJJJJJJJJJJJDC               ", "               CDPHHPHHPHHPHHPDC               ", "               CGGGGGGGGGGGGGGGC               ", "               CGGGGGGGGGGGGGGGC               ", "               CPPPPPPPPPPPPPPPC               ", "               CGGGGGGGGGGGGGGGC               ", "               CGGGGGGGGGGGGGGGC               ", "               C   H   H   H   C               ", "                                               ", "     CEC                               CEC     ", "     AJA                               AJA     ", "     CEC                               CEC     ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("              AAOOOOOOOOOOOOOOOAA              ", "                DAAAAAAAAAAAAAD                ", "                DEEEEEEEEEEEEED                ", "               CDAAAAAAAAAAAAADC               ", "                   H   H   H                   ", "                   H   H   H                   ", "                   H   H   H                   ", "                   H   H   H                   ", "                   H   H   H                   ", "                   H   H   H                   ", "                                               ", "     CEC                               CEC     ", "     AJA                               AJA     ", "     CEC                               CEC     ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("               AAAAAAAAAAAAAAAAA               ", "                   A   A   A                   ", "                   A   A   A                   ", "                CCCCCCCCCCCCCCC                ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "     CEC                               CEC     ", "     AJA                               AJA     ", "     CEC                               CEC     ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "     CEC                               CEC     ", "     AJA                               AJA     ", "     CEC                               CEC     ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("                     AAAAA                     ", "                      AAA                      ", "                       A                       ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "     CEC                               CEC     ", "     AJA                               AJA     ", "     CEC                               CEC     ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("                     ACPCA                     ", "                     AAHAA                     ", "                      AAA                      ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "     CEC                               CEC     ", "     AJA                               AJA     ", "     CEC                               CEC     ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("                   AAHCPCHAA                   ", "                     AHHHA                     ", "                      AAA                      ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "     CEC                               CEC     ", "     AJA                               AJA     ", "     CEC                               CEC     ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("    AAAAA         A  CCPCC  A         AAAAA    ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "     CEC                               CEC     ", "     AJA                               AJA     ", "     CEC                               CEC     ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("  AAABBBAAA      A CCCCPCCCC A      AAABBBAAA  ", "    CCCCC             APA             CCCCC    ", "                     AAPAA                     ", "                     AAPAA                     ", "                      A A                      ", "                      A A                      ", "                      A A                      ", "                      A A                      ", "    CCCCC             A A             CCCCC    ", "                                               ", "                                               ", "     CEC                               CEC     ", "     AJA                               AJA     ", "     CEC                               CEC     ", "                                               ", "                                               ", "   AAAAAAA                           AAAAAAA   ", "      A                                 A      ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle(" AABBBBBBBAA    A CCCCCCCCCCC A    AABBBBBBBAA ", "   CDAAADC           GMOMG           CDAAADC   ", "    DEEED           AMMOMMA           DEEED    ", "    DEEED           AAAPAAA           DEEED    ", "    DEEED            AAPAA            DEEED    ", "    DEEED             APA             DEEED    ", "    DEEED            HAPAH            DEEED    ", "    DEEED             APA             DEEED    ", "   CCAAACC            APA            CCAAACC   ", "    CDDDC             A A             CDDDC    ", "    CDEDC            HA AH            CDEDC    ", "    CDEDC             A A             CDEDC    ", "    CDJDC             A A             CDEDC    ", "    CDEDC             A A             CDEDC    ", "    CDEDC            HA AH            CDEDC    ", "    CDDDC             A A             CDDDC    ", "  A CFFFC A           A A           A CFFFC A  ", "   CCCCCCC            A A            CCCCCCC   ", "      A               A A               A      ", "                      A A                      ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle(" ABBBBBBBBBA    A CCCCCCCCCCC A    ABBBBBBBBBA ", "  CGHHHHHGC         GSSSSSG         CGHHHHHGC  ", "   GHIIIHG         AMSSSSSMA         GHIIIHG   ", "   GH   HG         AMMMOMMMA         GH   HG   ", "   GHIIIHG          MMMOMMM          GHIIIHG   ", "   GH   HG          MMMOMMM          GH   HG   ", "   GHIIIHG          HMMOMMH          GHIIIHG   ", "   GH   HG           MMOMM           GH   HG   ", "  CCBBBBBCC          MMPMM          CCBBBBBCC  ", "   G     G           MMPMM           G     G   ", "   GH J HG          HMMPMMH          GH J HG   ", "   G  J  G           MMPMM           G  J  G   ", "   GJJJJJG           MMPMM           GJJJJJG   ", "   G  J  G           MMPMM           G  J  G   ", "   GH J HG          HMMPMMH          GH J HG   ", "   G     G           MMPMM           G     G   ", " A GBBBBBG A         MMPMM         A GBBBBBG A ", "  CCCCCCCCC          MMPMM          CCCCCCCCC  ", "      A              HAPAH              A      ", "                      APA                      ", "                      A A                      ", "                      A A                      ", "                      A A                      ", "                      A A                      ", "                      A A                      ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("AABBBBBBBBBAA AAHCCCCCCCCCCCCCHAA AABBBBBBBBBAA", " CDHHIIIHHDC   AA  GSHUUUHSG  AA   CDHHIIIHHDC ", "  DHI   IHD       AMSH   HSMA       DHI   IHD  ", "  DH III HD       AAMHUUUHMAA       DH III HD  ", "  DHI   IHD        AMH   HMA        DHI   IHD  ", "  DH III HD         MHUUUHM         DH III HD  ", "  DHI   IHD        HMH   HMH        DHI   IHD  ", "  DH III HD         MHUUUHM         DH III HD  ", " CCBBBBBBBCC        MH   HM        CCBBBBBBBCC ", "  C H J H C         MHUUUHM         C H J H C  ", "  CHL   LHC        HMH   HMH        CHL   LHC  ", "  C       C         MHUUUHM         C       C  ", "  CJ     JC         MH   HM         CJ     JC  ", "  C       C         MHUUUHM         C       C  ", "  CHL   LHC        HMH   HMH        CHL   LHC  ", "  C H J H C         MHUUUHM         C H J H C  ", " ACBBBBBBBCA        MH   HM        ACBBBBBBBCA ", "  CCHCCCHCC         MHUUUHM         CCHCCCHCC  ", "    H A H           HMM MMH           H A H    ", "    HHHHH            MMPMM            HHHHH    ", "                     MMPMM                     ", "                      MPM                      ", "                      MPM                      ", "                      MPM                      ", "                     AAPAA                     ", "                       P                       ", "                       P                       ", "                       P                       ", "                       P                       ", "                       P                       ")
                        .aisle("ABBBBBBBBBBBA ACCCCCCCCCCCCCCCCCA ABBBBBBBBBBBA", " CAHIILIIHAC  AAH AMSU   USMA HAA  CAHIILIIHAC ", "  EI  I  IE    AA AMS     SMA AA    EI  I  IE  ", "  E IILII E       AAMU   UMAA       E IILII E  ", "  EI  I  IE       AAM     MAA       EI  I  IE  ", "  E IILII E       AAMU   UMAA       E IILII E  ", "  EI  I  IE       AAM     MAA       EI  I  IE  ", "  E IILII E       AAMU   UMAA       E IILII E  ", " CABBBBBBBAC      AAM     MAA      CABBBBBBBAC ", "  D   J   D        AMU   UMA        D   J   D  ", "  D       D        AM     MA        D       D  ", "  D       D        AMU   UMA        D       D  ", "  DJ     JD        AM     MA        DJ     JD  ", "  D       D        AMU   UMA        D       D  ", "  D       D        AM     MA        D       D  ", "  D   J   D        AMU   UMA        D   J   D  ", " AFBBBBBBBFA       AM     MA       AFBBBBBBBFA ", "  CCCCCCCCC        AMU   UMA        CCCCCCCCC  ", "      A            AAM   MAA            A      ", "    H   H          AAM   MAA          H   H    ", "                    AM   MA                    ", "                    AM   MA                    ", "                    AM   MA                    ", "                    AM   MA                    ", "                    AA   AA                    ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("ABBBBBBBBBBBA APPPPCCCCCCCCCPPPPA ABBBBBBBBBBBA", " CAHILNLIHAC  AHH POSU N USOP HHA  CAHILNLIHAC ", "  EI INI IE   AAA POS  N  SOP AAA   EI INI IE  ", "  E ILNLI E       PPOU N UOPP       E ILNLI E  ", "  EI INI IE        PO  N  OP        EI INI IE  ", "  E ILNLI E        POU N UOP        E ILNLI E  ", "  EI INI IE        PO  N  OP        EI INI IE  ", "  E ILNLI E        POU N UOP        E ILNLI E  ", " CABBBNBBBAC       PP  N  PP       CABBBNBBBAC ", "  D JJNJJ D         PU N UP         D JJNJJ D  ", "  EJ     JE         P  N  P         EJ     JE  ", "  EJ     JE         PU N UP         EJ     JE  ", "  EJ     JE         P  N  P         EJ     JE  ", "  EJ     JE         PU N UP         EJ     JE  ", "  EJ     JE         P  N  P         EJ     JE  ", "  D JJJJJ D         PU N UP         D JJJJJ D  ", " AFBBBBBBBFA        P  N  P        AFBBBBBBBFA ", " ACCCCCCCCCA        PU N UP        ACCCCCCCCCA ", "  AAAAAAAAA         P  N  P         AAAAAAAAA  ", "    H   H           PP N PP           H   H    ", "                     P   P                     ", "                     P   P                     ", "                     P   P                     ", "                     P   P                     ", "                     P   P                     ", "                     P   P                     ", "                     P   P                     ", "                     P   P                     ", "                     P   P                     ", "                     P   P                     ")
                        .aisle("ABBBBBBBBBBBA ACCCCCCCCCCCCCCCCCA ABBBBBBBBBBBA", " CAHIILIIHAC  AAH AMSU   USMA HAA  CAHIILIIHAC ", "  EI  I  IE    AA AMS     SMA AA    EI  I  IE  ", "  E IILII E       AAMU   UMAA       E IILII E  ", "  EI  I  IE       AAM     MAA       EI  I  IE  ", "  E IILII E       AAMU   UMAA       E IILII E  ", "  EI  I  IE       AAM     MAA       EI  I  IE  ", "  E IILII E       AAMU   UMAA       E IILII E  ", " CABBBBBBBAC      AAM     MAA      CABBBBBBBAC ", "  D   J   D        AMU   UMA        D   J   D  ", "  D       D        AM     MA        D       D  ", "  D       D        AMU   UMA        D       D  ", "  DJ     JD        AM     MA        DJ     JD  ", "  D       D        AMU   UMA        D       D  ", "  D       D        AM     MA        D       D  ", "  D   J   D        AMU   UMA        D   J   D  ", " AFBBBBBBBFA       AM     MA       AFBBBBBBBFA ", "  CCCCCCCCC        AMU   UMA        CCCCCCCCC  ", "      A            AAM   MAA            A      ", "    H   H          AAM   MAA          H   H    ", "                    AM   MA                    ", "                    AM   MA                    ", "                    AM   MA                    ", "                    AM   MA                    ", "                    AA   AA                    ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("AABBBBBBBBBAA AAHCCCCCCCCCCCCCHAA AABBBBBBBBBAA", " CDHHIIIHHDC   AA  GSHUUUHSG  AA   CDHHIIIHHDC ", "  DHI   IHD       AMSH   HSMA       DHI   IHD  ", "  DH III HD       AAMHUUUHMAA       DH III HD  ", "  DHI   IHD        AMH   HMA        DHI   IHD  ", "  DH III HD         MHUUUHM         DH III HD  ", "  DHI   IHD        HMH   HMH        DHI   IHD  ", "  DH III HD         MHUUUHM         DH III HD  ", " CCBBBBBBBCC        MH   HM        CCBBBBBBBCC ", "  C H J H C         MHUUUHM         C H J H C  ", "  CHL   LHC        HMH   HMH        CHL   LHC  ", "  C       C         MHUUUHM         C       C  ", "  CJ     JC         MH   HM         CJ     JC  ", "  C       C         MHUUUHM         C       C  ", "  CHL   LHC        HMH   HMH        CHL   LHC  ", "  C H J H C         MHUUUHM         C H J H C  ", " ACBBBBBBBCA        MH   HM        ACBBBBBBBCA ", "  CCHCCCHCC         MHUUUHM         CCHCCCHCC  ", "    H A H           HMM MMH           H A H    ", "    HHHHH            MMPMM            HHHHH    ", "                     MMPMM                     ", "                      MPM                      ", "                      MPM                      ", "                      MPM                      ", "                     AAPAA                     ", "                       P                       ", "                       P                       ", "                       P                       ", "                       P                       ", "                       P                       ")
                        .aisle(" ABBBBBBBBBA    A CCCCCCCCCCC A    ABBBBBBBBBA ", "  CGHHHHHGC         GSSSSSG         CGHHHHHGC  ", "   GHIIIHG         AMSSSSSMA         GHIIIHG   ", "   GH   HG         AMMMOMMMA         GH   HG   ", "   GHIIIHG          MMMOMMM          GHIIIHG   ", "   GH   HG          MMMOMMM          GH   HG   ", "   GHIIIHG          HMMOMMH          GHIIIHG   ", "   GH   HG           MMOMM           GH   HG   ", "  CCBBBBBCC          MMPMM          CCBBBBBCC  ", "   G     G           MMPMM           G     G   ", "   GH J HG          HMMPMMH          GH J HG   ", "   G  J  G           MMPMM           G  J  G   ", "   GJJJJJG           MMPMM           GJJJJJG   ", "   G  J  G           MMPMM           G  J  G   ", "   GH J HG          HMMPMMH          GH J HG   ", "   G     G           MMPMM           G     G   ", " A GBBBBBG A         MMPMM         A GBBBBBG A ", "  CCCCCCCCC          MMPMM          CCCCCCCCC  ", "      A              HAPAH              A      ", "                      APA                      ", "                      A A                      ", "                      A A                      ", "                      A A                      ", "                      A A                      ", "                      A A                      ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle(" AABBBBBBBAA    A CCCCCCCCCCC A    AABBBBBBBAA ", "   CDAAADC           GMOMG           CDAAADC   ", "    DEEED           AMMOMMA           DEEED    ", "    DEEED           AAAPAAA           DEEED    ", "    DEEED            AAPAA            DEEED    ", "    DEEED             APA             DEEED    ", "    DEEED            HAPAH            DEEED    ", "    DEEED             APA             DEEED    ", "   CCAAACC            APA            CCAAACC   ", "    CDDDC             A A             CDDDC    ", "    CDEDC            HA AH            CDEDC    ", "    CDEDC             A A             CDEDC    ", "    CDEDC             A A             CDEDC    ", "    CDEDC             A A             CDEDC    ", "    CDEDC            HA AH            CDEDC    ", "    CDDDC             A A             CDDDC    ", "  A CFFFC A           A A           A CFFFC A  ", "   CCCCCCC            A A            CCCCCCC   ", "      A               A A               A      ", "                      A A                      ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("  AAABBBAAA      A CCCCPCCCC A      AAABBBAAA  ", "    CCCCC             APA             CCCCC    ", "                     AAPAA                     ", "                     AAPAA                     ", "                      A A                      ", "                      A A                      ", "                      A A                      ", "                      A A                      ", "    CCCCC             A A             CCCCC    ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "   AAAAAAA                           AAAAAAA   ", "      A                                 A      ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("    AAAAA         A  CCPCC  A         AAAAA    ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("                   AAHCPCHAA                   ", "                     AHHHA                     ", "                      AAA                      ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("                     ACPCA                     ", "                     AAHAA                     ", "                      AAA                      ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("                     AAAAA                     ", "                      AAA                      ", "                       A                       ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("                     DDDDD                     ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                     QQQQQ                     ", "                       Q                       ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("                    DDDDDDD                    ", "                     EEDEE                     ", "                     EEDEE                     ", "                     EEDEE                     ", "                     EEDEE                     ", "                     EEDEE                     ", "                     EEDEE                     ", "                     EEDEE                     ", "                     EEDEE                     ", "                     EEDEE                     ", "                     EEDEE                     ", "                     EEDEE                     ", "                     EEDEE                     ", "                     EEDEE                     ", "                    QDDDDDQ                    ", "                       Q                       ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("                   DDDDDDDDD                   ", "                    E     E                    ", "                    E     E                    ", "                    E     E                    ", "                    E     E                    ", "                    E     E                    ", "                    E Q Q E                    ", "                    E  Q  E                    ", "                    E Q Q E                    ", "                    E     E                    ", "                    E     E                    ", "                    E     E                    ", "                    E     E                    ", "                    E     E                    ", "                   QDDDDDDDQ                   ", "                       Q                       ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("                  DDDDDDDDDDD                  ", "                   E  KKK  E                   ", "                   E  KKK  E                   ", "                   E  KKK  E                   ", "                   E  KKK  E                   ", "                   E QKKKQ E                   ", "                   E  KKK  E                   ", "                   E  KKK  E                   ", "                   E  KKK  E                   ", "                   E QKKKQ E                   ", "                   E  KKK  E                   ", "                   E  KKK  E                   ", "                   E  KKK  E                   ", "                   E  KKK  E                   ", "                  QDDDDDDDDDQ                  ", "                      KKK                      ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("                 DDDDDDDDDDDDD                 ", "                  E  K   K  E                  ", "                  E  K   K  E                  ", "                  E  K   K  E                  ", "                  E QK   KQ E                  ", "                  E  K   K  E                  ", "                  E  K   K  E                  ", "                  E  K   K  E                  ", "                  E  K   K  E                  ", "                  E  K   K  E                  ", "                  E QK   KQ E                  ", "                  E  K   K  E                  ", "                  E  K   K  E                  ", "                  E  K   K  E                  ", "                 QDDDDDDDDDDDQ                 ", "                     KKKKK                     ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("                 DDDDDDDDDDDDD                 ", "                  E KF X FK E                  ", "                  E KV X VK E                  ", "                  EQKF X FKQE                  ", "                  E KV X VK E                  ", "                  E KF X FK E                  ", "                  E KV X VK E                  ", "                  E KF X FK E                  ", "                  E KV X VK E                  ", "                  E KF X FK E                  ", "                  E KV X VK E                  ", "                  EQKF X FKQE                  ", "                  E KV X VK E                  ", "                  E KF X FK E                  ", "                 QDDDDDDDDDDDQ                 ", "                 QQQQKKKKKQQQQ                 ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("                 DDDDDDDDDDDDD                 ", "                  E  K   K  E                  ", "                  E QK   KQ E                  ", "                  E  K X K  E                  ", "                  E  K   K  E                  ", "                  E  K   K  E                  ", "                  E  K   K  E                  ", "                  E  K X K  E                  ", "                  E  K   K  E                  ", "                  E  K   K  E                  ", "                  E  K   K  E                  ", "                  E  K X K  E                  ", "                  E QK   KQ E                  ", "                  E  K   K  E                  ", "                 QDDDDDDDDDDDQ                 ", "                     KKKKK                     ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("                 DDDDDDDDDDDDD                 ", "                  QDDKWWWKDDQ                  ", "                  QDDKKKKKDDQ                  ", "                  QDDKKXKKDDQ                  ", "                  QDDKKKKKDDQ                  ", "                  QDDKWWWKDDQ                  ", "                  QDDKKKKKDDQ                  ", "                  QDDKKXKKDDQ                  ", "                  QDDKKKKKDDQ                  ", "                  QDDKWWWKDDQ                  ", "                  QDDKKKKKDDQ                  ", "                  QDDKKXKKDDQ                  ", "                  QDDKKKKKDDQ                  ", "                  QDDKWWWKDDQ                  ", "                  QDDDDDDDDDQ                  ", "                      KKK                      ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("                  DDDDDDDDDDD                  ", "                   QTGDVDGTQ                   ", "                   QTGDVDGTQ                   ", "                   QTGDXDGTQ                   ", "                   QTGDVDGTQ                   ", "                   QTGDVDGTQ                   ", "                   Q GDVDG Q                   ", "                   Q GDXDG Q                   ", "                   Q GDVDG Q                   ", "                   Q GDVDG Q                   ", "                   Q GDVDG Q                   ", "                   Q GDXDG Q                   ", "                   Q GDVDG Q                   ", "                   Q GDVDG Q                   ", "                   QDDDDDDDQ                   ", "                       Q                       ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("                   DDDDDDDDD                   ", "                    TVDDDVT                    ", "                    TVDDDVT                    ", "                    TVDXDVT                    ", "                    TVDDDVT                    ", "                    TTDDDTT                    ", "                      DDD                      ", "                      DKD                      ", "                      DDD                      ", "                      DDD                      ", "                      DDD                      ", "                      DKD                      ", "                      DDD                      ", "                      DDD                      ", "                    QDDDDDQ                    ", "                       Q                       ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("                   DDDDDDDDD                   ", "                    TTTXTTT                    ", "                    TTTXTTT                    ", "                    TTTXTTT                    ", "                    TTTTTTT                    ", "                    TTTTTTT                    ", "                                               ", "                       K                       ", "                                               ", "                                               ", "                                               ", "                       K                       ", "                                               ", "                                               ", "                     QQQQQ                     ", "                       Q                       ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("                    DDDDDDD                    ", "                     GTXTG                     ", "                     GTXTG                     ", "                     GTXTG                     ", "                      TKT                      ", "                       K                       ", "                       K                       ", "                       K                       ", "                       K                       ", "                       K                       ", "                       K                       ", "                       K                       ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("                     DDDDD                     ", "                      TTT                      ", "                      TTT                      ", "                      TYT                      ", "                      TTT                      ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .aisle("                      DDD                      ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ", "                                               ")
                        .where('A', blocks(GTOBlocks.NAQUADAH_ALLOY_CASING.get()))
                        .where('B', blocks(GTOBlocks.PLASMA_HEATER_CASING.get()))
                        .where('C', blocks(GTOBlocks.IRIDIUM_CASING.get()))
                        .where('D', blocks(GTOBlocks.BORON_CARBIDE_CERAMIC_RADIATION_RESISTANT_MECHANICAL_CUBE.get()))
                        .where('E', blocks(GTBlocks.CASING_TEMPERED_GLASS.get()))
                        .where('F', blocks(GTOBlocks.MAGTECH_CASING.get()))
                        .where('G', blocks(GTOBlocks.STRONTIUM_CARBONATE_CERAMIC_RAY_ABSORBING_MECHANICAL_CUBE.get()))
                        .where('H', blocks(ChemicalHelper.getBlock(TagPrefix.frameGt, GTMaterials.Neutronium)))
                        .where('I', blocks(GTOBlocks.MOLECULAR_COIL.get()))
                        .where('J', blocks(GTOBlocks.AMPROSIUM_ACTIVE_CASING.get()))
                        .where('K', blocks(GTOBlocks.PRESSURE_CONTAINMENT_CASING.get()))
                        .where('L', blocks(GTOBlocks.CONTAINMENT_FIELD_GENERATOR.get()))
                        .where('M', blocks(GTOBlocks.GRAVITY_STABILIZATION_CASING.get()))
                        .where('N', blocks(GTOBlocks.HOLLOW_CASING.get()))
                        .where('O', blocks(GTOBlocks.RADIATION_ABSORBENT_CASING.get()))
                        .where('P', blocks(GTBlocks.HIGH_POWER_CASING.get()))
                        .where('Q', blocks(ChemicalHelper.getBlock(TagPrefix.frameGt, GTMaterials.MaragingSteel300)))
                        .where('R', blocks(GTOBlocks.HIGH_ENERGY_ULTRAVIOLET_EMITTER_CASING.get()))
                        .where('S', blocks(GTOBlocks.ADVANCED_ASSEMBLY_LINE_UNIT.get()))
                        .where('T', blocks(GTOBlocks.IRIDIUM_CASING.get())
                                .or(GTOPredicates.autoLaserAbilities(definition.getRecipeTypes()))
                                .or(abilities(PARALLEL_HATCH).setMaxGlobalLimited(1))
                                .or(abilities(MAINTENANCE).setExactLimit(1)))
                        .where('U', blocks(GTBlocks.SUPERCONDUCTING_COIL.get()))
                        .where('V', blocks(ChemicalHelper.getBlock(TagPrefix.frameGt, GTMaterials.Europium)))
                        .where('W', blocks(GTOBlocks.PPS_CORROSION_RESISTANT_MECHANICAL_HOUSING.get()))
                        .where('X', blocks(GTBlocks.HERMETIC_CASING_ZPM.get()))
                        .where('Y', controller(blocks(definition.get())))
                        .where(' ', any())
                        .build();
                default -> builder.aisle("    AAAAA    ", "             ", "             ", "             ", "             ", "             ", "             ", "             ", "             ", "             ", "             ", "             ", "             ", "             ", "    BBBBB    ", "      B      ")
                        .aisle("   AAAAAAA   ", "    CCACC    ", "    CCACC    ", "    CCACC    ", "    CCACC    ", "    CCACC    ", "    CCACC    ", "    CCACC    ", "    CCACC    ", "    CCACC    ", "    CCACC    ", "    CCACC    ", "    CCACC    ", "    CCACC    ", "   BAAAAAB   ", "      B      ")
                        .aisle("  AAAAAAAAA  ", "   C     C   ", "   C     C   ", "   C     C   ", "   C     C   ", "   C     C   ", "   C B B C   ", "   C  B  C   ", "   C B B C   ", "   C     C   ", "   C     C   ", "   C     C   ", "   C     C   ", "   C     C   ", "  BAAAAAAAB  ", "      B      ")
                        .aisle(" AAAAAAAAAAA ", "  C  DDD  C  ", "  C  DDD  C  ", "  C  DDD  C  ", "  C  DDD  C  ", "  C BDDDB C  ", "  C  DDD  C  ", "  C  DDD  C  ", "  C  DDD  C  ", "  C BDDDB C  ", "  C  DDD  C  ", "  C  DDD  C  ", "  C  DDD  C  ", "  C  DDD  C  ", " BAAAAAAAAAB ", "     DDD     ")
                        .aisle("AAAAAAAAAAAAA", " C  D   D  C ", " C  D   D  C ", " C  D   D  C ", " C BD   DB C ", " C  D   D  C ", " C  D   D  C ", " C  D   D  C ", " C  D   D  C ", " C  D   D  C ", " C BD   DB C ", " C  D   D  C ", " C  D   D  C ", " C  D   D  C ", "BAAAAAAAAAAAB", "    DDDDD    ")
                        .aisle("AAAAAAAAAAAAA", " C DF J FD C ", " C DH J HD C ", " CBDF J FDBC ", " C DH J HD C ", " C DF J FD C ", " C DH J HD C ", " C DF J FD C ", " C DH J HD C ", " C DF J FD C ", " C DH J HD C ", " CBDF J FDBC ", " C DH J HD C ", " C DF J FD C ", "BAAAAAAAAAAAB", "BBBBDDDDDBBBB")
                        .aisle("AAAAAAAAAAAAA", " C  D   D  C ", " C BD   DB C ", " C  D J D  C ", " C  D   D  C ", " C  D   D  C ", " C  D   D  C ", " C  D J D  C ", " C  D   D  C ", " C  D   D  C ", " C  D   D  C ", " C  D J D  C ", " C BD   DB C ", " C  D   D  C ", "BAAAAAAAAAAAB", "    DDDDD    ")
                        .aisle("AAAAAAAAAAAAA", " BAADIIIDAAB ", " BAADDDDDAAB ", " BAADDJDDAAB ", " BAADDDDDAAB ", " BAADIIIDAAB ", " BAADDDDDAAB ", " BAADDJDDAAB ", " BAADDDDDAAB ", " BAADIIIDAAB ", " BAADDDDDAAB ", " BAADDJDDAAB ", " BAADDDDDAAB ", " BAADIIIDAAB ", " BAAAAAAAAAB ", "     DDD     ")
                        .aisle(" AAAAAAAAAAA ", "  BEGAHAGEB  ", "  BEGAHAGEB  ", "  BEGAJAGEB  ", "  BEGAHAGEB  ", "  BEGAHAGEB  ", "  B GAHAG B  ", "  B GAJAG B  ", "  B GAHAG B  ", "  B GAHAG B  ", "  B GAHAG B  ", "  B GAJAG B  ", "  B GAHAG B  ", "  B GAHAG B  ", "  BAAAAAAAB  ", "      B      ")
                        .aisle("  AAAAAAAAA  ", "   EHAAAHE   ", "   EHAAAHE   ", "   EHAJAHE   ", "   EHAAAHE   ", "   EEAAAEE   ", "     AAA     ", "     ADA     ", "     AAA     ", "     AAA     ", "     AAA     ", "     ADA     ", "     AAA     ", "     AAA     ", "   BAAAAAB   ", "      B      ")
                        .aisle("  AAAAAAAAA  ", "   EEEJEEE   ", "   EEEJEEE   ", "   EEEJEEE   ", "   EEEEEEE   ", "   EEEEEEE   ", "             ", "      D      ", "             ", "             ", "             ", "      D      ", "             ", "             ", "    BBBBB    ", "      B      ")
                        .aisle("   AAAAAAA   ", "    GEJEG    ", "    GEJEG    ", "    GEJEG    ", "     EDE     ", "      D      ", "      D      ", "      D      ", "      D      ", "      D      ", "      D      ", "      D      ", "             ", "             ", "             ", "             ")
                        .aisle("    AAAAA    ", "     EEE     ", "     EEE     ", "     EKE     ", "     EEE     ", "             ", "             ", "             ", "             ", "             ", "             ", "             ", "             ", "             ", "             ", "             ")
                        .aisle("     AAA     ", "             ", "             ", "             ", "             ", "             ", "             ", "             ", "             ", "             ", "             ", "             ", "             ", "             ", "             ", "             ")
                        .where('A', blocks(GTOBlocks.BORON_CARBIDE_CERAMIC_RADIATION_RESISTANT_MECHANICAL_CUBE.get()))
                        .where('B', blocks(ChemicalHelper.getBlock(TagPrefix.frameGt, GTMaterials.MaragingSteel300)))
                        .where('C', blocks(GTBlocks.CASING_TEMPERED_GLASS.get()))
                        .where('D', blocks(GTOBlocks.PRESSURE_CONTAINMENT_CASING.get()))
                        .where('E', blocks(GTOBlocks.IRIDIUM_CASING.get())
                                .or(GTOPredicates.autoLaserAbilities(definition.getRecipeTypes()))
                                .or(abilities(PARALLEL_HATCH).setMaxGlobalLimited(1))
                                .or(abilities(MAINTENANCE).setExactLimit(1)))
                        .where('F', blocks(GTOBlocks.MAGTECH_CASING.get()))
                        .where('G', blocks(GTOBlocks.STRONTIUM_CARBONATE_CERAMIC_RAY_ABSORBING_MECHANICAL_CUBE.get()))
                        .where('H', blocks(ChemicalHelper.getBlock(TagPrefix.frameGt, GTMaterials.Europium)))
                        .where('I', blocks(GTOBlocks.PPS_CORROSION_RESISTANT_MECHANICAL_HOUSING.get()))
                        .where('J', blocks(GTBlocks.HERMETIC_CASING_ZPM.get()))
                        .where('K', controller(blocks(definition.get())))
                        .build();
            };
        });
    }

    @Override
    public BlockPattern getPattern() {
        return getBlockPattern(machineTier, getDefinition());
    }

    @Override
    public List<BlockPattern> getMultiPattern() {
        return List.of(getBlockPattern(0, getDefinition()), getBlockPattern(1, getDefinition()), getBlockPattern(2, getDefinition()));
    }

    @Nullable
    @Override
    protected Recipe getRealRecipe(@NotNull Recipe recipe) {
        if (machineTier < 2) {
            if (recipe.getInputEUt() > 30719) return null;
        } else if (machineTier < 3) {
            if (recipe.getInputEUt() > 491519) return null;
        }
        return RecipeModifierFunction.overclocking(this, RecipeModifierFunction.hatchParallel(this, recipe));
    }

    @Override
    public void customText(List<Component> textList) {
        super.customText(textList);
    }
}
